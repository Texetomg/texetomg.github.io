(this.webpackJsonpmironov=this.webpackJsonpmironov||[]).push([[0],{105:function(t,e,a){t.exports=a(133)},110:function(t,e,a){},111:function(t,e,a){},117:function(t,e){},119:function(t,e){},133:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(54),c=a.n(o),i=(a(110),a(34)),l=a(15),d=a(16),s=a(18),u=a(17),m=a(19),h=(a(111),a(112)),p=function(t,e,a){var n=[],r="http://www.cbr.ru/scripts/XML_dynamic.asp?date_req1=".concat(t,"&date_req2=").concat(e,"&VAL_NM_RQ=").concat(a);return fetch("https://cors-anywhere.herokuapp.com/"+r).then((function(t){return t.text()})).then((function(t){return h.xml2json(t,{compact:!0,spaces:2})})).then((function(t){return JSON.parse(t)})).then((function(t){return t.ValCurs.Record})).catch((function(){return console.log("Cant access "+r+" response.")})).then((function(t){return t.forEach((function(t){var e={};e.date=t._attributes.Date,e.value=parseFloat(t.Value._text.replace(",",".")),n.push(e)})),n})).catch((function(){return console.log("Cant access "+r+" response.")}))},g=function(t){return t.split("-").reverse().join("/")},f=a(55),v=a.n(f),b=function(t){return r.a.createElement("header",{className:v.a.AppHeader},r.a.createElement("h2",null,t.name))},S=a(56),x=a.n(S),y=function(t){return r.a.createElement("div",null,r.a.createElement("button",{className:x.a.button,type:t.type},t.children))},_=a(57),E=a.n(_),k=function(){var t=(new Date).toLocaleDateString().split("/");return"".concat(t[2],"-").concat(t[0],"-").concat(t[1])},I=function(t){return r.a.createElement("div",null,r.a.createElement("input",{value:t.value,required:!0,min:"1992-01-07",max:k(),type:"date",className:E.a.dateInput,onChange:t.onChange,name:t.name}))},w=a(35),C=a.n(w),R=a(58),D=a.n(R),N=a(59),O=a(60),j=function(t){return r.a.createElement("select",{onChange:t.onChange,name:t.name,className:D.a.currencySelector,value:t.selectedCurrency},O.map((function(t){return r.a.createElement("option",{key:Object(N.v4)(),title:t.description,value:t.id},t.name)})))},A=function(t){return r.a.createElement("form",{className:C.a.mainForm,onSubmit:function(e){return t.handleSubmit(e)}},r.a.createElement(I,{onChange:t.handleInputChange,name:"dateStart",value:t.dateStart}),r.a.createElement(I,{onChange:t.handleInputChange,minDate:t.minDate,name:"dateEnd",value:t.dateEnd}),r.a.createElement(j,{selectedCurrency:t.selectedCurrency,onChange:t.handleInputChange,name:"currency"}),r.a.createElement(y,{id:C.a.buttonB,type:"submit"},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"))},B=a(36),J=a.n(B),T=function(t){return r.a.createElement("div",{className:J.a.loaderBlock},!1===t.loaded?r.a.createElement("div",{className:J.a.ldsDual}):null)},F=a(61),L=a.n(F),G=function(){return r.a.createElement("div",{className:L.a.footer},"Chentsov Bogdan ",(new Date).getFullYear())},U=a(37),H=a.n(U),K=function(t){return r.a.createElement("div",null,"Bar ",r.a.createElement("label",{className:H.a.switch},r.a.createElement("input",{onChange:t.onChange,checked:t.checked,type:"checkbox"}),r.a.createElement("span",{className:H.a.slider}))," Lin")},M=a(1),P=a(6),X=a.n(P),Y=function(t,e,a){t.append("g").attr("transform","translate(0, ".concat(e,")")).call(M.a(a)).selectAll("text").attr("transform","rotate(-45 20 20)")},q=function(t,e){t.append("g").call(M.b(e))},V=function(t,e){var a=t.margin,n=t.width,r=t.height,o=t.xScale,c=t.yScale,i=t.min,l=t.max,d=t.dataset;o.domain(d.map((function(t){return t.date}))),c.domain([i-(l-i)/2,l]);var s=M.h(e).append("svg").attr("width",n+a.left+a.right).attr("height",r+a.top+a.bottom).append("g").attr("transform","translate(".concat(a.left,", ").concat(a.top,")")),u=s.selectAll(".bar").data(d).enter().append("g"),m=u.append("rect").attr("class",X.a.bar).attr("x",(function(t){return o(t.date)})).attr("width",o.bandwidth()).attr("y",(function(){return r})).attr("fill","steelblue").attr("height",(function(){return 0}));m.transition().duration(1e3).attr("y",(function(t){return c(t.value)})).attr("height",(function(t){return r-c(t.value)})),m.on("mouseenter",(function(t){u.append("text").attr("text-anchor","middle").attr("fill","white").attr("y",1).attr("x",o(t.date)+o.bandwidth()/2).attr("y",c(t.value)-5).text(t.value),s.append("line").attr("id","limit").attr("x1",0).attr("y1",c(t.value)).attr("x2",n).attr("y2",c(t.value)).attr("stroke","red")})).on("mouseleave",(function(){s.selectAll("#limit").remove(),u.selectAll("text").remove()})),Y(s,r,o),q(s,c)},W=function(t,e){var a=t.margin,n=t.width,r=t.height,o=t.xScale,c=t.yScale,i=t.min,l=t.max,d=t.dataset;o.domain(d.map((function(t){return t.date}))),c.domain([i-(l-i)/2,l]);var s=M.h(e).append("svg").attr("width",n+a.left+a.right).attr("height",r+a.top+a.bottom).append("g").attr("transform","translate(".concat(a.left,", ").concat(a.top,")")),u=M.c().x((function(t){return o(t.date)})).y((function(t){return c(t.value)}));s.append("path").datum(d).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("d",u).attr("transform","translate(".concat(a.left-25,", ").concat(a.top,")")).attr("opacity",0).transition().duration(1500).attr("opacity",1);var m=s.selectAll(".dot").data(d).enter().append("circle");m.attr("stroke","steelblue").attr("class",X.a.dot).attr("cx",u.x()).attr("cy",r).attr("r",5).attr("transform","translate(".concat(a.left-25,", ").concat(a.top,")")).transition().duration(800).attr("cy",u.y()),m.on("mouseenter",(function(t){s.append("text").attr("class","dottext").attr("x",o(t.date)).attr("y",c(t.value)).attr("fill","white").text("".concat(t.date,": ").concat(t.value))})).on("mouseleave",(function(){s.selectAll(".dottext").remove()})),Y(s,r,o),q(s,c)},Z=function(t){var e={top:20,right:20,bottom:60,left:40},a=600+20*t.length-e.left-e.right,n=500-e.top-e.bottom;return{margin:e,width:a,height:n,xScale:M.f().range([0,a]).padding(.1),yScale:M.g().range([n,0]),min:M.e(t,(function(t){return t.value})),max:M.d(t,(function(t){return t.value})),dataset:t}},z=function(t){function e(){var t,a;Object(l.a)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).renderGraph=function(t){var e=Z(t);M.h("svg").remove(),a.props.checkbox?W(e,a.refs.target):V(e,a.refs.target)},a}return Object(m.a)(e,t),Object(d.a)(e,[{key:"componentDidUpdate",value:function(t){var e=JSON.stringify(this.props.dataset);e===JSON.stringify(t.dataset)&&t.checkbox===this.props.checkbox||void 0===e||this.renderGraph(this.props.dataset)}},{key:"componentDidMount",value:function(){this.renderGraph(this.props.dataset)}},{key:"render",value:function(){return void 0!==this.props.dataset?r.a.createElement("div",{className:X.a.timeline,ref:"target"}):r.a.createElement("p",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d")}}]),e}(r.a.Component),Q=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).fetchData=function(){a.setState({loaded:!1}),p(g(a.state.dateStart),g(a.state.dateEnd),g(a.state.currency)).then((function(t){a.setState({data:t,loaded:!0}),localStorage.setItem("data",JSON.stringify(t))}))},a.handleSubmit=function(t){t.preventDefault(),a.fetchData()},a.handleToggleChange=function(t){a.setState({checkbox:t.target.checked}),localStorage.setItem("checkbox",t.target.checked)},a.handleInputChange=function(t){var e=t.target,n=e.value,r=e.name;a.setState(Object(i.a)({},r,n)),localStorage.setItem(r,n)},a.renderTimelinePage=function(t){return r.a.createElement(z,Object.assign({},t,{dataset:a.state.data,checkbox:a.state.checkbox}))},a.state={dateStart:localStorage.getItem("dateStart"),dateEnd:localStorage.getItem("dateEnd"),currency:localStorage.getItem("currency"),data:0!==localStorage.getItem("data").length||void 0===localStorage.getItem("data").length?JSON.parse(localStorage.getItem("data")):[],loaded:!0,checkbox:JSON.parse(localStorage.getItem("checkbox"))},a}return Object(m.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(b,{name:"PriceGraph"}),r.a.createElement("main",{className:"App-body"},r.a.createElement(A,{checkbox:this.state.checkbox,handleInputChange:this.handleInputChange,handleSubmit:this.handleSubmit,dateStart:this.state.dateStart,dateEnd:this.state.dateEnd,selectedCurrency:this.state.currency}),r.a.createElement(K,{checked:this.state.checkbox,onChange:this.handleToggleChange}),r.a.createElement(T,{loaded:this.state.loaded}),r.a.createElement(z,{dataset:this.state.data,checkbox:this.state.checkbox}),r.a.createElement(G,null)))}}]),e}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));null==localStorage.getItem("dateStart")&&localStorage.setItem("dateStart",""),null==localStorage.getItem("dateEnd")&&localStorage.setItem("dateEnd",""),null==localStorage.getItem("currency")&&localStorage.setItem("currency","R01010"),null==localStorage.getItem("data")&&localStorage.setItem("data",""),null==localStorage.getItem("checkbox")&&localStorage.setItem("checkbox",!0),c.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},35:function(t,e,a){t.exports={mainForm:"InputDataForm_mainForm__3kjXD"}},36:function(t,e,a){t.exports={ldsDual:"Loader_ldsDual__3v03h","lds-dual-ring":"Loader_lds-dual-ring__Xgx-k",loaderBlock:"Loader_loaderBlock__3MM5J"}},37:function(t,e,a){t.exports={switch:"Toggle_switch__o23b6",slider:"Toggle_slider__83_PI"}},55:function(t,e,a){t.exports={AppHeader:"Header_AppHeader__3ZPiF"}},56:function(t,e,a){t.exports={button:"Button_button__2UOzE"}},57:function(t,e,a){t.exports={dateInput:"DateInput_dateInput__2agut"}},58:function(t,e,a){t.exports={currencySelector:"CurrencySelector_currencySelector__1wwXC"}},6:function(t,e,a){t.exports={timeline:"Timeline_timeline__2Nwls",bar:"Timeline_bar__1Y-49",dot:"Timeline_dot__UkL--"}},60:function(t){t.exports=JSON.parse('[{"name":"AUD","id":"R01010","description":"\u0410\u0432\u0441\u0442\u0440\u0430\u043b\u0438\u0439\u0441\u043a\u0438\u0439 \u0434\u043e\u043b\u043b\u0430\u0440"},{"name":"GBR","id":"R01035","description":"\u0424\u0443\u043d\u0442 \u0441\u0442\u0435\u0440\u043b\u0438\u043d\u0433\u043e\u0432 \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u043d\u043e\u0433\u043e \u043a\u043e\u0440\u043e\u043b\u0435\u0432\u0441\u0442\u0432\u0430"},{"name":"BYR","id":"R01090","description":"\u0411\u0435\u043b\u043e\u0440\u0443\u0441\u0441\u043a\u0438\u0445 \u0440\u0443\u0431\u043b\u0435\u0439"},{"name":"DKK","id":"R01215","description":"\u0414\u0430\u0442\u0441\u043a\u0438\u0445 \u043a\u0440\u043e\u043d"},{"name":"USD","id":"R01235","description":"\u0414\u043e\u043b\u043b\u0430\u0440 \u0421\u0428\u0410"},{"name":"EUR","id":"R01239","description":"\u0415\u0432\u0440\u043e"},{"name":"ISK","id":"R01310","description":"\u0418\u0441\u043b\u0430\u043d\u0434\u0441\u043a\u0438\u0445 \u043a\u0440\u043e\u043d"},{"name":"KZT","id":"R01335","description":"\u041a\u0430\u0437\u0430\u0445\u0441\u0442\u0430\u043d\u0441\u043a\u0438\u0445 \u0442\u0435\u043d\u0433\u0435"},{"name":"CAD","id":"R01350","description":"\u041a\u0430\u043d\u0430\u0434\u0441\u043a\u0438\u0439 \u0434\u043e\u043b\u043b\u0430\u0440"},{"name":"NOK","id":"R01535","description":"\u041d\u043e\u0440\u0432\u0435\u0436\u0441\u043a\u0438\u0445 \u043a\u0440\u043e\u043d"},{"name":"XDR","id":"R01589","description":"\u0421\u0414\u0420 (\u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u0430\u0432\u0430 \u0437\u0430\u0438\u043c\u0441\u0442\u0432\u043e\u0432\u0430\u043d\u0438\u044f)"},{"name":"SGD","id":"R01625","description":"\u0421\u0438\u043d\u0433\u0430\u043f\u0443\u0440\u0441\u043a\u0438\u0439 \u0434\u043e\u043b\u043b\u0430\u0440"},{"name":"TRL","id":"R01700","description":"\u0422\u0443\u0440\u0435\u0446\u043a\u0438\u0445 \u043b\u0438\u0440"},{"name":"UAH","id":"R01720","description":"\u0423\u043a\u0440\u0430\u0438\u043d\u0441\u043a\u0438\u0445 \u0433\u0440\u0438\u0432\u0435\u043d"},{"name":"SEK","id":"R01770","description":"\u0428\u0432\u0435\u0434\u0441\u043a\u0438\u0445 \u043a\u0440\u043e\u043d"},{"name":"CHF","id":"R01775","description":"\u0428\u0432\u0435\u0439\u0446\u0430\u0440\u0441\u043a\u0438\u0439 \u0444\u0440\u0430\u043d\u043a"},{"name":"JPY","id":"R01820","description":"\u042f\u043f\u043e\u043d\u0441\u043a\u0438\u0445 \u0438\u0435\u043d"}]')},61:function(t,e,a){t.exports={footer:"Footer_footer__23G4h"}}},[[105,1,2]]]);
//# sourceMappingURL=main.7320be77.chunk.js.map